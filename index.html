<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strategic Mortgage Planner - NPV, DTI & Equity Forecaster</title>

    <!-- SEO & Social Meta Tags -->
    <meta name="description" content="An advanced mortgage calculator to analyze payoff scenarios, equity growth, Debt-to-Income (DTI), Net Present Value (NPV) of costs, and potential refinance options.">
    <meta property="og:title" content="Strategic Mortgage Planner">
    <meta property="og:description" content="Model your mortgage with advanced scenarios including extra payments, refinancing, and property appreciation.">
    <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIHJ4PSIyMCIgZmlsbD0iIzFDNzY4RiIvPjxwYXRoIGQ9Ik01MCAyNUwyNSA0NVY3NUg0MS42NjY3VjU4LjMzMzNINTguMzMzM1Y3NUg3NVY0NUw1MCAyNVoiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjxwYXRoIGQ9Ik00MCA2NUw1MCA1NUw2MCA2NSIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48cGF0aCBkPSJNNTAgNTVWNDUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9zdmc+">

    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    
    <!-- App Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#1C768F', 'accent': '#1e8749', 'npv': '#E86F00',
                        'dti-safe': '#10b981', 'dti-high': '#f59e0b', 'dti-critical': '#ef4444',
                    },
                    fontFamily: { sans: ['Inter', 'sans-serif'] }
                }
            }
        }
    </script>

    <!-- Global Stylesheet -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- Global Header -->
    <header class="bg-white/80 backdrop-blur-lg shadow-sm sticky top-0 z-50 no-print">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-center h-14">
                <a href="/" class="flex items-center space-x-2 text-primary hover:opacity-80 transition-opacity">
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIHJ4PSIyMCIgZmlsbD0iIzFDNzY4RiIvPjxwYXRoIGQ9Ik01MCAyNUwyNSA0NVY3NUg0MS42NjY3VjU4LjMzMzNINTguMzMzM1Y3NUg3NVY0NUw1MCAyNVoiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjxwYXRoIGQ9Ik00MCA2NUw1MCA1NUw2MCA2NSIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48cGF0aCBkPSJNNTAgNTVWNDUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9zdmc+" alt="Strategic Mortgage Planner Logo" class="h-6 w-6">
                    <span class="font-bold text-lg">
                        <span class="border-b-2 border-primary">Strategic</span> Mortgage Planner
                    </span>
                </a>
            </div>
        </nav>
    </header>

    <!-- Main Content Area -->
    <main class="content-wrapper">
        <div class="calculator-container bg-white p-4 md:p-8 rounded-xl shadow-2xl w-full max-w-6xl mx-auto my-4">
            <div class="text-center bg-sky-50 p-3 rounded-lg mb-4 shadow-sm">
                <h2 class="text-lg md:text-xl font-extrabold text-primary">
                    Mortgage Calculator
                </h2>
                <p class="text-xs text-gray-600 mt-0.5">NPV, DTI, Equity & Payoff Forecaster</p>
            </div>

            <div id="error-messages" class="hidden p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 border border-red-200" role="alert">
                <span class="font-medium">Please correct the following errors:</span>
                <ul id="error-list" class="mt-1.5 ml-4 list-disc list-inside"></ul>
            </div>
            
            <div class="main-grid-layout grid grid-cols-1 gap-6 mt-4 lg:grid-cols-2">
                
                <div class="input-column flex flex-col gap-4">
                    
                    <details open class="bg-white rounded-lg shadow-lg border border-gray-200">
                        <summary class="p-4 font-bold text-base text-primary border-b border-gray-200 cursor-pointer flex justify-between items-center relative before:content-['+'] open:before:content-['−'] before:absolute before:right-4 before:text-xl">
                            Loan Core Details
                        </summary>
                        <div class="input-section grid grid-cols-1 sm:grid-cols-2 gap-4 p-4">
                            <div class="space-y-1">
                                <label for="loanAmount" class="block font-medium text-sm text-gray-700">Loan Principal ($/£/€):</label>
                                <input type="number" id="loanAmount" value="300000" min="1000" step="1000" class="w-full p-2 border border-gray-300 rounded-md focus:ring-primary focus:border-primary">
                            </div>
                            <div class="space-y-1">
                                <label for="initialLTV" class="block font-medium text-sm text-gray-700">
                                    <span class="tooltip-container">Initial LTV (%):
                                        <span class="tooltip-icon" tabindex="0">?</span>
                                        <span class="tooltip-text">Loan-to-Value (LTV) is your loan amount divided by the property's value. An LTV over 80% typically requires PMI.</span>
                                    </span>
                                </label>
                                <input type="number" id="initialLTV" value="90" min="5" max="100" step="1" class="w-full p-2 border border-gray-300 rounded-md focus:ring-primary focus:border-primary">
                            </div>
                            <div class="space-y-1">
                                <label for="interestRate" class="block font-medium text-sm text-gray-700">Annual P&I Rate (%):</label>
                                <input type="number" id="interestRate" value="6.5" min="0.1" max="25" step="0.1" class="w-full p-2 border border-gray-300 rounded-md focus:ring-primary focus:border-primary">
                            </div>
                            <div class="space-y-1">
                                <label for="loanTerm" class="block font-medium text-sm text-gray-700">Original Term (Years):</label>
                                <input type="number" id="loanTerm" value="30" min="5" max="50" class="w-full p-2 border border-gray-300 rounded-md focus:ring-primary focus:border-primary">
                            </div>
                            <div class="space-y-1 col-span-1 sm:col-span-2">
                                <label for="repaymentFrequency" class="block font-medium text-sm text-gray-700">Frequency (Periods/yr):</label>
                                <select id="repaymentFrequency" class="w-full p-2 border border-gray-300 rounded-md focus:ring-primary focus:border-primary h-[42px]">
                                    <option value="12">Monthly (12)</option>
                                    <option value="26">Bi-Weekly (26)</option>
                                    <option value="24">Semi-Monthly (24)</option>
                                    <option value="52">Weekly (52)</option>
                                </select>
                            </div>
                        </div>
                    </details>

                    <details open class="bg-white rounded-lg shadow-lg border border-gray-200">
                        <summary class="p-4 font-bold text-base text-dti-safe border-b border-gray-200 cursor-pointer flex justify-between items-center relative before:content-['+'] open:before:content-['−'] before:absolute before:right-4 before:text-xl">
                            Debt-to-Income (DTI) Inputs
                        </summary>
                        <div class="input-section grid grid-cols-1 sm:grid-cols-2 gap-4 p-4">
                            <div class="space-y-1">
                                <label for="annualIncome" class="block font-medium text-sm text-gray-700">Annual Gross Income ($):</label>
                                <input type="number" id="annualIncome" value="120000" min="0" step="1000" class="w-full p-2 border border-gray-300 rounded-md focus:ring-dti-safe focus:border-dti-safe">
                            </div>
                            <div class="space-y-1">
                                <label for="nonMortgageDebt" class="block font-medium text-sm text-gray-700">Monthly Non-Mortgage Debt ($):</label>
                                <input type="number" id="nonMortgageDebt" value="800" min="0" step="50" class="w-full p-2 border border-gray-300 rounded-md focus:ring-dti-safe focus:border-dti-safe">
                                <p class="text-xs text-gray-600 mt-1">Car, student, CC payments.</p>
                            </div>
                        </div>
                    </details>

                    <details open class="bg-white rounded-lg shadow-lg border border-gray-200">
                        <summary class="p-4 font-bold text-base text-primary border-b border-gray-200 cursor-pointer flex justify-between items-center relative before:content-['+'] open:before:content-['−'] before:absolute before:right-4 before:text-xl">
                            PITI, Payoff & Economic Inputs
                        </summary>
                        <div class="input-section grid grid-cols-1 sm:grid-cols-2 gap-4 p-4">
                            <div class="space-y-1 col-span-1 sm:col-span-2 bg-accent/10 p-2 rounded-md border border-accent/30">
                                <label for="appreciationRate" class="block font-bold text-sm text-accent">Annual Property Appreciation (%):</label>
                                <input type="number" id="appreciationRate" value="3.5" min="0" max="15" step="0.1" class="w-full p-2 border border-accent/50 rounded-md focus:ring-accent focus:border-accent">
                            </div>
                            <div class="space-y-1 col-span-1 sm:col-span-2 bg-npv/10 p-2 rounded-md border border-npv/30">
                                <label for="discountRate" class="block font-bold text-sm text-npv">
                                     <span class="tooltip-container">Annual Investment/Inflation Rate (%):
                                        <span class="tooltip-icon" tabindex="0">?</span>
                                        <span class="tooltip-text">Also called the Discount Rate. Represents the return you could get by investing your money elsewhere (e.g., stock market) or the rate of inflation. Used for NPV.</span>
                                    </span>
                                </label>
                                <input type="number" id="discountRate" value="3.0" min="0" max="20" step="0.1" class="w-full p-2 border border-npv/50 rounded-md focus:ring-npv focus:border-npv">
                            </div>
                            <div class="space-y-1">
                                <!-- UI ENHANCEMENT: Added a tooltip for clarity -->
                                <label for="pitiEscalationRate" class="block font-medium text-sm text-red-700">
                                    <span class="tooltip-container">Annual Tax/Ins Escalation (%):
                                        <span class="tooltip-icon" tabindex="0">?</span>
                                        <span class="tooltip-text">The estimated annual increase for property taxes and homeowner's insurance. This does NOT apply to HOA dues.</span>
                                    </span>
                                </label>
                                <input type="number" id="pitiEscalationRate" value="2.0" min="0" max="10" step="0.1" class="w-full p-2 border border-red-300 rounded-md focus:ring-red-500 focus:border-red-500">
                            </div>
                            <div class="space-y-1">
                                <label for="pmiRate" class="block font-medium text-sm text-gray-700">Annual PMI Rate (%):</label>
                                <input type="number" id="pmiRate" value="0.5" min="0" max="5" step="0.05" class="w-full p-2 border border-gray-300 rounded-md focus:ring-primary focus:border-primary">
                            </div>
                            <div class="space-y-1">
                                <label for="propertyTax" class="block font-medium text-sm text-gray-700">Annual Property Tax ($):</label>
                                <input type="number" id="propertyTax" value="3600" min="0" step="10" class="w-full p-2 border border-gray-300 rounded-md focus:ring-primary focus:border-primary">
                            </div>
                            <div class="space-y-1">
                                <label for="insurance" class="block font-medium text-sm text-gray-700">Annual Home Insurance ($):</label>
                                <input type="number" id="insurance" value="1200" min="0" step="10" class="w-full p-2 border border-gray-300 rounded-md focus:ring-primary focus:border-primary">
                            </div>
                            <div class="space-y-1">
                                <label for="hoa" class="block font-medium text-sm text-gray-700">Monthly HOA Dues ($):</label>
                                <input type="number" id="hoa" value="0" min="0" step="10" class="w-full p-2 border border-gray-300 rounded-md focus:ring-primary focus:border-primary">
                            </div>
                            <div class="space-y-1">
                                <label for="extraPayment" class="block font-medium text-sm text-gray-700">Extra Principal (Per Period):</label>
                                <input type="number" id="extraPayment" value="100" min="0" step="10" class="w-full p-2 border border-gray-300 rounded-md focus:ring-primary focus:border-primary">
                            </div>
                            <div class="space-y-1">
                                <label for="lumpSumPayment" class="block font-medium text-sm text-gray-700">One-Time Lump Sum ($):</label>
                                <input type="number" id="lumpSumPayment" value="5000" min="0" step="500" class="w-full p-2 border border-gray-300 rounded-md focus:ring-primary focus:border-primary">
                            </div>
                            <div class="space-y-1">
                                <label for="lumpSumPeriod" class="block font-medium text-sm text-gray-700">Lump Sum Applied at Period:</label>
                                <input type="number" id="lumpSumPeriod" value="1" min="1" max="360" class="w-full p-2 border border-gray-300 rounded-md focus:ring-primary focus:border-primary">
                            </div>
                        </div>
                    </details>

                    <details class="bg-white rounded-lg shadow-lg border border-gray-200">
                        <summary class="p-4 font-bold text-base text-primary border-b border-gray-200 cursor-pointer flex justify-between items-center relative before:content-['+'] open:before:content-['−'] before:absolute before:right-4 before:text-xl">
                            Refinance Scenario Modeling
                        </summary>
                        <div class="input-section grid grid-cols-1 sm:grid-cols-2 gap-4 p-4">
                            <div class="space-y-1">
                                <label for="refiPeriod" class="block font-medium text-sm text-gray-700">Refinance at Period:</label>
                                <input type="number" id="refiPeriod" value="60" min="1" max="360" step="12" class="w-full p-2 border border-gray-300 rounded-md focus:ring-primary focus:border-primary">
                            </div>
                            <div class="space-y-1">
                                <label for="refiClosingCosts" class="block font-medium text-sm text-red-700">Refi Closing Costs ($):</label>
                                <input type="number" id="refiClosingCosts" value="5000" min="0" step="100" class="w-full p-2 border border-red-300 rounded-md focus:ring-red-500 focus:border-red-500">
                            </div>
                            <div class="space-y-1">
                                <label for="refiRate" class="block font-medium text-sm text-gray-700">New Annual Rate (%):</label>
                                <input type="number" id="refiRate" value="5.0" min="0.1" max="20" step="0.1" class="w-full p-2 border border-gray-300 rounded-md focus:ring-primary focus:border-primary">
                            </div>
                            <div class="space-y-1">
                                <label for="refiTerm" class="block font-medium text-sm text-gray-700">New Term (Years):</label>
                                <input type="number" id="refiTerm" value="15" min="1" max="30" step="1" class="w-full p-2 border border-gray-300 rounded-md focus:ring-primary focus:border-primary">
                            </div>
                        </div>
                    </details>

                    <details class="bg-white rounded-lg shadow-lg border border-gray-200">
                        <summary class="p-4 font-bold text-base text-primary border-b border-gray-200 cursor-pointer flex justify-between items-center relative before:content-['+'] open:before:content-['−'] before:absolute before:right-4 before:text-xl">
                            Interest Rate Shock Test
                        </summary>
                        <div class="input-section p-4">
                            <div class="space-y-1">
                                <label for="shockRateIncrease" class="block font-medium text-sm text-gray-700">Model Future Rate Increase by (%):</label>
                                <div class="flex gap-2 mt-1">
                                    <input type="number" id="shockRateIncrease" value="1.0" min="0.1" max="5" step="0.1" class="flex-grow p-2 border border-gray-300 rounded-md focus:ring-red-500 focus:border-red-500">
                                    <button onclick="handleCalculation(true)" class="bg-red-500 hover:bg-red-600 text-white font-semibold rounded-lg shadow-md transition duration-150 py-2 px-4 w-1/2">
                                        Run Shock Test
                                    </button>
                                </div>
                            </div>
                        </div>
                    </details>
                    
                    <div class="flex flex-col sm:flex-row gap-3 md:gap-4 mt-2">
                        <button id="calculateButton" onclick="handleCalculation()" class="w-full px-4 py-3 bg-primary text-white font-semibold rounded-lg shadow-xl hover:bg-sky-700 transition duration-150 min-h-11">
                            Calculate Full Scenario
                        </button>
                        <button id="resetButton" onclick="resetForm()" class="w-full px-4 py-3 bg-gray-200 text-gray-700 font-semibold rounded-lg shadow-md hover:bg-gray-300 transition duration-150 min-h-11">
                            Reset to Defaults
                        </button>
                    </div>
                </div>
                
                <div class="output-column flex flex-col gap-4">

                    <div id="results" class="p-4 bg-gray-50 rounded-lg shadow-inner border border-gray-200" aria-live="polite">
                        <div class="flex justify-between items-center mb-2">
                             <h3 class="text-xl font-bold text-gray-800">Calculation Summary</h3>
                             <button onclick="window.print()" class="no-print p-2 rounded-md hover:bg-gray-200 transition-colors" aria-label="Print Results" title="Print Results">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                                    <path d="M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"/>
                                    <path d="M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"/>
                                </svg>
                             </button>
                        </div>
                        
                        <p class="text-xl py-2 font-bold">Estimated Initial Monthly Payment (PITI + PMI): <span id="totalMonthlyPaymentPITI" class="text-primary"></span></p>
                        
                        <p class="text-xs text-red-600 text-center p-2 border-dashed border border-amber-500 bg-amber-50 rounded-md mt-2" id="pmiDropNote" style="display: none;">
                            PMI included until period <span id="pmiDropPeriod" class="font-bold"></span>, when LTV drops to 80%.
                        </p>

                        <div id="dti-results" class="mt-4 p-3 rounded-lg border border-dti-safe/50 bg-white shadow-md">
                            <h3 class="text-lg font-bold text-dti-safe mb-2 border-b pb-1">Debt-to-Income (DTI) Analysis</h3>
                            <div class="grid grid-cols-2 gap-4 text-center">
                                <div class="p-2 rounded-lg bg-gray-50 border">
                                    <p class="text-xs font-medium text-gray-600">Front-End DTI (Housing)</p>
                                    <p id="frontEndDTI" class="text-xl font-extrabold text-dti-safe"></p>
                                    <p id="frontEndDTIStatus" class="text-xs font-semibold mt-1"></p>
                                </div>
                                <div class="p-2 rounded-lg bg-gray-50 border">
                                    <p class="text-xs font-medium text-gray-600">Back-End DTI (Total Debt)</p>
                                    <p id="backEndDTI" class="text-xl font-extrabold text-dti-safe"></p>
                                    <p id="backEndDTIStatus" class="text-xs font-semibold mt-1"></p>
                                </div>
                            </div>
                        </div>

                        <div id="equity-summary" class="mt-4 p-3 rounded-lg border border-accent/50 bg-white shadow-md">
                            <h3 class="text-lg font-bold text-accent mb-2 border-b pb-1">Projected Equity Growth</h3>
                            <div class="grid grid-cols-2 gap-4 text-center">
                                 <div class="p-2 rounded-lg bg-gray-50 border">
                                    <p class="text-xs font-medium text-gray-600">Total Equity at Payoff</p>
                                    <p id="finalEquity" class="text-xl font-extrabold text-accent"></p>
                                </div>
                                <div class="p-2 rounded-lg bg-gray-50 border">
                                    <p class="text-xs font-medium text-gray-600">Final Property Value</p>
                                    <p id="finalPropertyValue" class="text-xl font-extrabold text-accent"></p>
                                </div>
                            </div>
                        </div>
                        
                        <div id="chartContainer" class="mt-4 bg-white rounded-lg shadow-md p-2">
                            <canvas id="comparisonChart"></canvas>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 text-sm">
                            <div class="bg-gray-100 p-3 rounded-lg border border-gray-200">
                                <h3 class="text-base font-semibold text-gray-700 mb-1">Original Loan (Standard)</h3>
                                <p>P&I Payment: <span id="standardPaymentDisplay"></span></p>
                                <p>Payoff Date: <span id="originalPayoffDate"></span></p>
                                <p class="mt-2 text-primary font-bold">Total Interest Paid: <span id="totalInterestOriginal"></span></p>
                                <p class="text-npv font-bold">NPV of Interest Cost: <span id="npvOriginal"></span></p>
                            </div>
                            <div class="bg-gray-100 p-3 rounded-lg border border-gray-200">
                                <h3 class="text-base font-semibold text-gray-700 mb-1">Accelerated Scenario</h3>
                                <p>Accelerated P&I Payment: <span id="acceleratedPaymentDisplay"></span></p>
                                <p>New Payoff Date: <span id="newPayoffDate" class="text-accent font-bold"></span></p>
                                <p class="mt-2 text-primary font-bold">Total Interest Paid: <span id="totalInterestNew"></span></p>
                                <p class="text-npv font-bold">NPV of Interest Cost: <span id="npvNew"></span></p>
                            </div>
                        </div>
                        
                        <p class="text-md mt-4 p-2 bg-accent/10 rounded-lg text-center font-medium">
                            You saved <span class="text-accent font-extrabold" id="interestSaved"></span> in Nominal Interest and shaved off <span class="text-accent font-extrabold" id="timeSaved"></span> from the loan term!
                        </p>
                        
                        <p class="text-md mt-2 p-2 bg-npv/10 rounded-lg text-center font-medium border-l-4 border-npv">
                             NPV Savings: <span class="text-npv font-extrabold" id="npvSaved"></span> (The true value saved in today's dollars).
                        </p>
                    </div>
                    
                    <div id="shock-results" class="p-4 bg-red-100 rounded-lg shadow-inner border border-red-300" style="display: none;">
                        <h3 class="text-lg font-bold text-red-700 mb-2">Interest Rate Shock Test Result</h3>
                        <p class="text-lg">New Rate: <span id="shockRateDisplay" class="text-red-600 font-bold"></span>%</p>
                        <p>Original P&I Payment: <span id="originalShockPaymentDisplay"></span></p>
                        <p class="text-lg py-1">New Shock P&I Payment: <span id="shockPaymentDisplay" class="text-red-600 font-bold"></span> (Increase of <span id="paymentIncrease" class="text-red-600 font-bold"></span>)</p>
                    </div>

                    <div id="schedule-wrapper" class="bg-white rounded-lg shadow-lg border border-gray-200">
                        <details>
                            <summary class="p-4 font-bold text-base text-primary border-b border-gray-200 cursor-pointer flex justify-between items-center relative before:content-['+'] open:before:content-['−'] before:absolute before:right-4 before:text-xl">
                               View Amortization Schedule
                            </summary>
                            <div id="schedule" class="overflow-x-auto max-w-full p-4">
                                <table id="amortizationTable" class="min-w-[1200px] w-full border-collapse"></table>
                                <p class="text-center text-xs text-primary/80 mt-2 italic">
                                    ← Scroll for full comparison →
                                </p>
                            </div>
                        </details>
                    </div>
                    
                </div>
            </div>

        </div>

        <!-- SEO Content Section -->
        <div id="guide-content" class="no-print">
            <!-- SEO Content will be loaded here by default -->
        </div>
    </main>

    <!-- Global Footer -->
    <footer class="bg-gray-800 text-gray-400 text-sm no-print">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="text-center text-xs">
                <p>&copy; <span id="copyright-year">2025</span> Strategic Mortgage Planner. All Rights Reserved. | <a href="legal.html" class="hover:text-white underline">Contact & Legal</a></p>
                 <p class="mt-1"><strong>Disclaimer:</strong> This tool is for informational purposes only. Consult a financial professional before making decisions.</p>
            </div>
        </div>
    </footer>

    <!-- Page-Specific and Global Scripts -->
    <script src="app.js" defer></script>
</body>
</html>
